// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s;r={};n=function(e){var t,n,r,i;t=$("#results");t.html("").addClass("loading");n="";$("#accounts input:checked").each(function(){return n+='"'+$(this).val()+'", '});n=n.slice(0,-2);r="";if($("#event-types input[type=checkbox]:not(:checked)").length>0){r="AND json.type IN (";$("#event-types input[type=checkbox]:checked").each(function(){return r+='"'+$(this).val()+'", '});r=r.slice(0,-2);r+=")"}i=encodeURIComponent('USE "https://raw.github.com/gcb/yql.opentable/master/text.concat.xml" AS text.concat;\n\nSELECT json FROM json\n\nWHERE url in\n  (SELECT text from text.concat\n    WHERE text.key1 = "https://api.github.com/orgs/"\n    AND text.key2 IN ('+n+')\n    AND text.key3 = "/events")\n\n'+r+'\n\n| SORT(field="json.created_at", descending="true")');return $.getJSON("http://query.yahooapis.com/v1/public/yql?q="+i+"&format=json&_maxage=600",function(e){var n,r,i,s;s=e.query.results.json;for(r=0,i=s.length;r<i;r++){n=s[r];t.append(githubSentences.convert(n.json))}$(".timestamp").relatizeDate();return t.removeClass("loading")})};s=githubSentences.eventTypes;for(t in s){i=s[t];e='<label class="checkbox">\n  <input type="checkbox" value="'+t+'" name="[]" checked />\n  '+i.name+"\n</label>";$("#event-types > .accordion-inner").append(e)}$(document).on("change","#accounts input[type=checkbox]",n);$(document).on("change","#event-types input[type=checkbox]",n);$(document).on("click",".toggle-all",function(){var e;e=$(this).parent().find(".accordion-inner input[type=checkbox]");e.attr("checked",e.filter(":checked").length>0?!1:!0);n();return r.saveAllData()});$(document).on("change keyup","#search-input",function(){var e;$("#results .github-sentence-item").removeClass("hidden");e=$(this).val();if(e)return $("#results .github-sentence-item").each(function(){if(!$(this).html().match(e))return $(this).addClass("hidden")})});$(function(){return $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%20%3D%20%22http%3A%2F%2Fregistry.usa.gov%2Faccounts.json%3Fservice_id%3Dgithub%22&format=json&_maxage=3600&callback=",function(t){var i,s,o,u;u=t.query.results.json.accounts;for(s=0,o=u.length;s<o;s++){i=u[s];e='<label class="checkbox">\n  <input type="checkbox" value="'+i.account+'" name="[]" checked />\n  '+i.account+"\n</label>";$("#accounts > .accordion-inner").append(e)}r=$("form").sisyphus();return n()})})}).call(this);